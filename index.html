<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>dd-vault-metadata</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Manual";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> dd-vault-metadata
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href=".">Manual</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#synopsis">SYNOPSIS</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#description">DESCRIPTION</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#vault-metadata-fields">Vault metadata fields</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#arguments">ARGUMENTS</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation-and-configuration">INSTALLATION AND CONFIGURATION</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#service-configuration-file">Service configuration file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dataverse-configuration">Dataverse configuration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#building-from-source">BUILDING FROM SOURCE</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="arch/">⇒ DANS Data Station Architecture</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">dd-vault-metadata</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" alt="Docs"></a> &raquo;</li><li>Manual</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/DANS-KNAW/dd-vault-metadata/edit/master/docs/index.md"> Edit on DANS-KNAW/dd-vault-metadata</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="dd-vault-metadata">dd-vault-metadata<a class="headerlink" href="#dd-vault-metadata" title="Permanent link">&para;</a></h1>
<p>Dataverse workflow step for setting DANS Data Vault metadata.</p>
<h2 id="synopsis">SYNOPSIS<a class="headerlink" href="#synopsis" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code>dd-vault-metadata { server | check }
</code></pre>

<h2 id="description">DESCRIPTION<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<p>This service implements a <code>PrePublishDataset</code> workflow step that sets DANS Data Vault metadata
on the dataset-version about to be published. </p>
<h3 id="vault-metadata-fields">Vault metadata fields<a class="headerlink" href="#vault-metadata-fields" title="Permanent link">&para;</a></h3>
<p>The following Vault metadata fields are set by this service.</p>
<table>
<thead>
<tr>
<th>typeName</th>
<th>value source  V1.0</th>
<th>value source Vn, n &gt; 1.0</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dansDataversePid</code></td>
<td>the dataset DOI</td>
<td>the dataset DOI</td>
</tr>
<tr>
<td><code>dansDataversePidVersion</code></td>
<td>the dataset version number</td>
<td>the dataset version number</td>
</tr>
<tr>
<td><code>dansBagId</code></td>
<td>a urn:uuid generated by this service</td>
<td>a urn:uuid generated by this service</td>
</tr>
<tr>
<td><code>dansNbn</code></td>
<td>a urn:nbn generated by this service</td>
<td>the urn:nbn minted for V1.0</td>
</tr>
</tbody>
</table>
<h2 id="arguments">ARGUMENTS<a class="headerlink" href="#arguments" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code>positional arguments:
{server,check}         available commands

named arguments:
-h, --help             show this help message and exit
-v, --version          show the application version and exit
</code></pre>

<h2 id="installation-and-configuration">INSTALLATION AND CONFIGURATION<a class="headerlink" href="#installation-and-configuration" title="Permanent link">&para;</a></h2>
<p>Currently this project is built as an RPM package for RHEL7/CentOS7 and later. The RPM will install the binaries to
<code>/opt/dans.knaw.nl/dd-vault-metadata</code> and the configuration files to <code>/etc/opt/dans.knaw.nl/dd-vault-metadata</code>. </p>
<p>To install the module on systems that do not support RPM, you can copy and unarchive the tarball to the target host.
You will have to take care of placing the files in the correct locations for your system yourself. For instructions
on building the tarball, see next section.</p>
<h3 id="service-configuration-file">Service configuration file<a class="headerlink" href="#service-configuration-file" title="Permanent link">&para;</a></h3>
<p>The configuration options are documented with comments int the <code>config.yml</code> configuration file.</p>
<h3 id="dataverse-configuration">Dataverse configuration<a class="headerlink" href="#dataverse-configuration" title="Permanent link">&para;</a></h3>
<p>To configure Dataverse to call this service, you must add it as an <a href="https://guides.dataverse.org/en/latest/developers/workflows.html#http-authext">http/authext</a>
workflow step to the default <code>PrePublishDataset</code> workflow. The JSON to use in the step is included in <code>INSTALL_DIR/install/workflow-step.json</code>.</p>
<h2 id="building-from-source">BUILDING FROM SOURCE<a class="headerlink" href="#building-from-source" title="Permanent link">&para;</a></h2>
<p>Prerequisites:</p>
<ul>
<li>Java 11 or higher</li>
<li>Maven 3.3.3 or higher</li>
<li>RPM</li>
</ul>
<p>Steps:</p>
<pre class="codehilite"><code>git clone https://github.com/DANS-KNAW/dd-vault-metadata.git
cd dd-vault-metadata 
mvn clean install
</code></pre>

<p>If the <code>rpm</code> executable is found at <code>/usr/local/bin/rpm</code>, the build profile that includes the RPM 
packaging will be activated. If <code>rpm</code> is available, but at a different path, then activate it by using
Maven's <code>-P</code> switch: <code>mvn -Pprm install</code>.</p>
<p>Alternatively, to build the tarball execute:</p>
<pre class="codehilite"><code>mvn clean install assembly:single
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="arch/" class="btn btn-neutral float-right" title="⇒ DANS Data Station Architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="arch/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.3.0
Build Date UTC : 2024-05-28 07:11:20.564143+00:00
-->
